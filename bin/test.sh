#!/usr/bin/env bash

set -e

CHECK_IT='\xE2\x9C\x85'
ROOT=$(git rev-parse --show-toplevel)

echo
echo -e "______ _           ___  ___               _           _ "
echo -e "|  ___(_)          |  \/  |              | |         | |"
echo -e "| |_   _ _ __ ___  | .  . | __ _ _ __ ___| |__   __ _| |"
echo -e "|  _| | | '__/ _ \ | |\/| |/ _\` | '__/ __| '_ \ / _\` | |"
echo -e "| |   | | | |  __/ | |  | | (_| | |  \__ \ | | | (_| | |"
echo -e "\_|   |_|_|  \___| \_|  |_/\__,_|_|  |___/_| |_|\__,_|_|"
echo

echo "test all modules"

# generated by http://patorjk.com/software/taag/#p=testall&f=Fun%20Face&t=Fire%20Marshal

(cd ${ROOT}/server && npm run lint -- --fix)
(cd ${ROOT}/static && npm run lint -- --fix)
(cd ${ROOT}/wss && npm run lint -- --fix)

echo -e "$CHECK_IT  link and fix sources"

echo -e "$CHECK_IT  done"
