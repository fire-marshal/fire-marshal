#!/usr/bin/env bash

echo
echo -e "______ _           ___  ___               _           _ "
echo -e "|  ___(_)          |  \/  |              | |         | |"
echo -e "| |_   _ _ __ ___  | .  . | __ _ _ __ ___| |__   __ _| |"
echo -e "|  _| | | '__/ _ \ | |\/| |/ _\` | '__/ __| '_ \ / _\` | |"
echo -e "| |   | | | |  __/ | |  | | (_| | |  \__ \ | | | (_| | |"
echo -e "\_|   |_|_|  \___| \_|  |_/\__,_|_|  |___/_| |_|\__,_|_|"
echo -e "                                                        "
echo

# generated by http://patorjk.com/software/taag/#p=testall&f=Fun%20Face&t=Fire%20Marshal

echo "performance test"

# TODO: add options:
# - just test
# - generate performance.md

cat ./docs-template/performance-header.md > ./docs/performance.md

echo 'estimate /api/v1/fires'

echo '## GET /api/v1/fires' >> ./docs/performance.md
echo '```' >> ./docs/performance.md
ab -n 500 http://192.168.100.13:8000/api/v1/fires >> ./docs/performance.md
echo '```' >> ./docs/performance.md

echo 'estimate /api/v1/fires?start_date=2010'

echo '## GET /api/v1/fires?start_date=2010' >> ./docs/performance.md
echo '```' >> ./docs/performance.md
ab -n 500 http://192.168.100.13:8000/api/v1/fires?start_date=2010 >> ./docs/performance.md
echo '```' >> ./docs/performance.md
